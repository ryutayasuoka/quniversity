<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximam-scale=1, user-scalable=no" >

    <!-- css -->
    <link rel="stylesheet" type="text/css" href="../css/quniversity.css" />
    <link rel="stylesheet" type="text/css" href="../css/create.css" />

    <title>Quniversity</title>
  </head>

  <body>
    <header>
    </header>

    <!-- begin container -->
    <div id="container">

      <div id="title">
        質問する
      </div>

      <textarea type="text" name="Qcontent" placeholder="ここに質問を入力してね(最大８０文字)"></textarea>

      <div id="selects">
        <input type="text" name="select" placeholder="選択肢を入力"></input><br />
        <input type="text" name="select" placeholder="15文字以上打ったら殺す"></input><br />
        <input type="text" name="select"></input><br />
        <input type="text" name="select"></input><br />
      </div>

      <div id="comment">
        コメントをもらう
      </div>

      <div id="category">
        <select name="category">
          <option value="1">大学生活</option>
          <option value="2">恋愛</option>
          <option value="3">素朴な質問</option>
          <option value="4">ちょっとHな質問</option>
          <option value="5">くだらない質問</option>
          <option value="6">その他</option>
        </select>
      </div>

      <div id="submit">
        投稿する
      </div>

      <footer>
      </footer>

    </div>
    <!-- end container -->

  </body>

  <script type="text/javascript" src="../js/lib/jquery.js" ></script>
  <script type="text/javascript" src="../js/quniversity.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){
        //include footer
        includeFooter();
    });

    //submit question
    $("#submit").click(function(){

        var storage = localStorage;
        var array = new Array();

        //check Qcontent
        var qContent = $("[name=Qcontent]").val();
        if(!checkLength(qContent,1,80) ){
            alert("質問内容がエラーだわっしょい");
            return ;
        }
        array.push(qContent);

        array.push(storage.getItem("sex")); //insert sex
        //array.push($("[name=category]").val()); // insert category
        array.push("0"); //insert NiceQcount

        //check Qselect
        var selects = $("[name=select]");

        var select;
        var selectNum = 1;
        for(var i=0; i<selects.length; i++){

            select = selects[i].value;
            //error or none text
            if(select == ""){
                continue;
            }else if(!checkLength(select,1,15)){
                alert("選択肢がエラーだわっしょい");
                return ;
            }
            array.push(select);
            selectNum++;
        }
        // error
        if(selectNum == 1){
            alert("選択肢が１つもありません。");
            return ;
        }

        // insert "その他"
        array.push("その他");
        // insert each select count
        for(var i=0; i<selectNum; i++){
            array.push("0");
        }

        var storage = localStorage;
        storage.setItem("question1",JSON.stringify(array));

        location.href = "result.html";
    });

  </script>
</html>
