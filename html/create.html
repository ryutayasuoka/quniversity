<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewpoint" content="width=device-width, initial-scale=1" />

    <!-- css -->
    <link rel="stylesheet" type="text/css" href="../css/quniversity.css" />

    <title>Quniversity</title>
  </head>

  <body>
    <header>
    </header>

    <!-- begin container -->
    <div id="container">

      <div>
        <h2>質問作成</h2>
      </div>

      <p>質問内容</p>
      <textarea type="text" name="Qcontent" rows="4" cols="20"></textarea>

      <p>選択肢(最大４つ、１５文字)</p>
      <input type="text" name="select"></input><br />
      <input type="text" name="select"></input><br />
      <input type="text" name="select"></input><br />
      <input type="text" name="select"></input><br />

      <br /><br />
      <a id="submit">投稿する</a>

      <footer>
      </footer>

    </div>
    <!-- end container -->

  </body>

  <script type="text/javascript" src="../js/lib/jquery.js" ></script>
  <script type="text/javascript" src="../js/webstorage.js"></script>
  <script type="text/javascript" src="../js/quniversity.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){
        //include footer
        includeFooter();
    });

    //submit question
    $("#submit").click(function(){

        var storage = localStorage;
        var array = new Array();

        //check Qcontenta
        var qContent = $("[name=Qcontent]").val();
        if(!checkLength(qContent,1,80) ){
            alert("質問内容がエラーだわっしょい");
            return ;
        }
        array.push(qContent);
        array.push("0"); //NiceQcount
        //check Qselect
        var selects = $("[name=select]");

        var select;
        var selectNum = 1;
        for(var i=0; i<selects.length; i++){
            //alert(typeof selects[i].value);
            select = selects[i].value;
            //error or none text
            if(select == ""){
                continue;
            }else if(!checkLength(select,1,15)){
                alert("選択肢がエラーだわっしょい");
                return ;
            }
            array.push(select);
            selectNum++;
        }
        // error
        if(selectNum == 1){
            alert("選択肢が１つもありません。");
            return ;
        }

        // insert "その他"
        array.push("その他");
        // insert each select count
        for(var i=0; i<selectNum; i++){
            array.push("0");
        }

        var storage = localStorage;
        storage.setItem("question1",JSON.stringify(array));

        location.href = "result.html";
    });

  </script>
</html>
