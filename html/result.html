<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" >

    <!-- css -->
    <link rel="stylesheet" type="text/css" href="../css/quniversity.css" />
    <link rel="stylesheet" type="text/css" href="../css/result.css" />

    <title>Quniversity</title>
  </head>

  <body>
    <header>
      <img src="" alt="ロゴが入る">
    </header>

    <!-- begin container -->
    <div id="container">

      <p id="title">回答結果</p>

      <div id="Qcontent">
      </div>

      <p style="margin:14px 0px;">なんて書いてあるかわからん！</p>

      <!---------- begin box ---------->
      <div class="box">
        <!-- left box -->
        <div id="Lbox">
          <canvas id="pie" height="180" width="180"></canvas>

          <div id="comment">
            コメントボタン
          </div>

          <div id="nice-q">
            NiceQボタン
          </div>

          <div id="share-twitter">
            結果をTwitterでシェアする
          </div>

        </div>

        <!-- rieft box -->
        <div id="Rbox">
          <div id="selects">
            選択肢が入る
          </div>

          <div id="chara-image">
            キャラクターが入る
          </div>
        </div>
      </div>

      <!---------- begin comments ---------->

      <footer>
      </footer>

    </div>
    <!-- end container -->

  </body>

  <script type="text/javascript" src="../js/lib/jquery.js" ></script>
  <script type="text/javascript" src="../js/piechart.js"></script>
  <script type="text/javascript" src="../js/quniversity.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){
        includeFooter();

        var questionId = getRequest();

        var storage = localStorage;
        //data = [content,sex,category,commentBool,selects,selectsCount,niceq]
        var data = JSON.parse(storage.getItem(questionId));

        //insert Qcontent
        $("#Qcontent").append(data[0]);
        var sex = data[1];
        var category = data[2];
        var commentBool = data[3];
        var niceQcount = data[4];

        var selectNum = calcSelectsNum(data);

        //insert selects
        var selectArray = new Array();
        for(var i=0; i<selectNum; i++){
            selectArray.push(data[i+5]);
        }
        //insert selects number
        var selectNumArray = new Array();
        for(var i=0; i<selectNum; i++){
            selectNumArray.push(data[i+5+selectNum]);
        }


        //generate canvas 2d object.
        var can = $("#pie")[0].getContext("2d");
        can.beginPath();
        createPieChart(selectNumArray,can);

        return ;
    });
  </script>
</html>
