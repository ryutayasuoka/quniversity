<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" >

    <!-- css -->
    <link rel="stylesheet" type="text/css" href="../css/quniversity.css" />
    <link rel="stylesheet" type="text/css" href="../css/settings.css" />

    <title>Quniversity</title>
  </head>

  <body>

    <header>
      <img id="back-btn" src="../images/header/back.png" />
      <img id="back-btn-active" src="../images/header/back_actv.png" />
      <img id="title" src="../images/setting/setting_settei.png" />
    </header>

    <!-- begin container -->
    <div id="container">
      <div id="setting-background">

        <div id="icon">
          <img src="../images/setting/setting_icon.png" />
        </div>

        <input type="text" id="username" ></input>

        <select name="relation">
          <option value="1">後輩</option>
          <option value="2">先輩</option>
          <option value="3">幼馴染</option>
        </select>

        <img src="../images/setting/setting_button.png" id="decide" />
        <img src="../images/setting/setting_button_activ.png" id="decide-active" />
      </div>
    </div>
    <!-- end container -->

    <footer>
    </footer>

  </body>

  <script type="text/javascript" src="../js/lib/jquery.js" ></script>
  <script type="text/javascript" src="../js/quniversity.js"></script>
  <script type="text/javascript">

  var storage = localStorage;

  $(document).ready(function(){

      //include footer
      includeFooter();
      hiddenAddressbar();

      //既にある値を格納
      $("#username").val(storage.getItem("username"));
      $("[name=relation]").val(storage.getItem("relation"));
  });

  $("#decide").bind('touchstart', function(){
      $(this).css("display","none");
      $("#decide-active").css("display","block");
  });
  $("#decide").bind('touchend', function(){
      $(this).css("display","block");
      $("#decide-active").css("display","none");
  });

  $("#decide").click(function(){

      //set username
      key = "username";
      value = $("#username").val();
      if(!checkLength(value,1,10) ){
          alert("ニックネームは１０文字以下で入力してね！");
          return ;
      }
      storage.setItem(key,value);
      value = "";

      //set relation
      key = "relation";
      value = $("[name=relation]").val();
      storage.setItem(key,value);

      location.href = "index.html";
  });

  </script>
</html>
